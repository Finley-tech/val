<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shaz üíó</title>
  <style>
    :root{
      --pink:#ffb6d5;
      --bg1:#0b1020;
      --bg2:#120a1f;
      --card:rgba(255,255,255,.08);
      --border:rgba(255,255,255,.14);
      --text:#f7f7ff;
      --muted:rgba(247,247,255,.78);
      --accent:#ff2d6f;
      --accent2:#ff5a86;
      --danger:#ef4444;
      --shadow:0 18px 45px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:#000;
      overflow-x:hidden;
    }
    h1{margin:0 0 10px;font-size:clamp(26px,4.2vw,42px);letter-spacing:.2px}
    p{margin:0 0 12px;line-height:1.7}
    .muted{color:var(--muted)}
    .small{font-size:.95rem}

    /* Screens */
    .screen{display:none;min-height:100vh}
    .screen.active{display:block}

    /* Landing */
    #landing{background:var(--pink)}
    #landing.active{
      display:grid;
      place-items:center;
      padding:20px;
    }

    /* Main + other screens background */
    #main, #valentine, #thanks{
      background:
        radial-gradient(900px 520px at 20% 15%, rgba(255,45,111,.20), transparent 60%),
        radial-gradient(900px 520px at 80% 35%, rgba(255,90,134,.16), transparent 55%),
        radial-gradient(680px 420px at 50% 90%, rgba(255,182,213,.08), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    /* Heart button */
    .heart-btn{
      border:none; cursor:pointer; color:#fff;
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px;
      padding:16px 22px; border-radius:999px;
      background:linear-gradient(135deg, rgba(255,45,111,.96), rgba(255,90,134,.85));
      box-shadow:0 18px 40px rgba(255,45,111,.22);
      animation:blinkPulse 1.05s infinite;
      font-weight:900; letter-spacing:.2px;
      transform-origin:center;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .heart-btn:hover{transform:translateY(-1px)}
    .heart-btn:active{transform:scale(.98)}
    .heart-icon{font-size:1.15em}
    @keyframes blinkPulse{
      0%{filter:brightness(1); transform:scale(1)}
      50%{filter:brightness(1.22); transform:scale(1.06)}
      100%{filter:brightness(1); transform:scale(1)}
    }

    /* Buttons */
    .btn{
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:12px 16px;
      border-radius:16px;
      cursor:pointer;
      transition:transform .12s ease, background .12s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:hover{transform:translateY(-1px); background:rgba(255,255,255,.08)}
    .btn:active{transform:scale(.99)}
    .btn.primary{
      border-color:rgba(255,45,111,.42);
      background:linear-gradient(135deg, rgba(255,45,111,.40), rgba(255,90,134,.20));
    }
    .btn.danger{
      border-color:rgba(239,68,68,.55);
      background:rgba(239,68,68,.12);
    }

    /* Valentine buttons default (smaller than before) */
    .val-btn{
      padding:10px 14px;
      border-radius:14px;
      font-size:1rem;
      min-width:120px;
    }

    /* Layout */
    .container{max-width:1050px;margin:0 auto;padding:22px 18px 32px}
    .panel{
      max-width:900px;margin:0 auto;
      padding:28px 18px;
      min-height:calc(100vh - 70px);
      display:flex;flex-direction:column;justify-content:center;gap:12px;
    }
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:center}

    /* Navbar */
    .nav{
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(10px);
      background: rgba(11,16,32,.62);
      border-bottom:1px solid var(--border);
    }
    .nav-inner{
      max-width:1050px;margin:0 auto;padding:12px 18px;
      display:flex;align-items:center;justify-content:space-between;gap:12px;
    }
    .brand{display:flex;align-items:center;gap:10px;font-weight:950}
    .brand-dot{
      width:34px;height:34px;border-radius:12px;display:grid;place-items:center;
      background:linear-gradient(135deg, rgba(255,45,111,.9), rgba(255,90,134,.65));
      box-shadow:0 12px 28px rgba(255,45,111,.18);
    }
    .nav-right{display:flex;align-items:center;gap:10px;flex-wrap:wrap}

    /* Animated heading */
    .title-anim{
      display:inline-block;
      font-weight: 980;
      letter-spacing: .3px;
      position: relative;
      animation: floatTitle 2.6s ease-in-out infinite;
    }
    @keyframes floatTitle{0%,100%{transform: translateY(0)}50%{transform: translateY(-6px)}}
    .title-anim::after{
      content:"";
      display:block;
      height:4px;
      width:72%;
      margin-top:10px;
      border-radius:999px;
      background: linear-gradient(90deg, rgba(255,45,111,.9), rgba(255,90,134,.75), rgba(255,45,111,.9));
      animation: underlineGlow 1.8s linear infinite;
    }
    @keyframes underlineGlow{0%{filter: brightness(1)}50%{filter: brightness(1.25)}100%{filter: brightness(1)}}

    /* Card */
    .card{
      padding:16px 16px;
      border-radius:18px;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow);
    }

    /* Thank you shimmer */
    .thank-you{
      font-size:clamp(34px,6vw,60px);
      background:linear-gradient(90deg,#fff,rgba(255,45,111,.95),rgba(255,90,134,.9),#fff);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      animation:shimmer 1.8s infinite linear;
      margin-bottom:6px;
    }
    @keyframes shimmer{0%{background-position:0% 50%}100%{background-position:200% 50%}}

    /* Tap-to-sound banner */
    .sound-banner{
      position:fixed;
      left:12px; right:12px; bottom:12px;
      z-index:50;
      display:none;
      padding:12px 14px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(11,16,32,.82);
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 45px rgba(0,0,0,.45);
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .sound-banner.show{display:flex}
    .sound-banner strong{font-weight:900}
    .sound-banner button{white-space:nowrap}

    /* Mobile */
    @media (max-width: 720px){
      .container{padding:16px 12px 24px}
      .nav-inner{padding:10px 12px; flex-wrap:wrap}
      .nav-right{width:100%}
      .nav-right .btn, .nav-right .heart-btn{flex:1; min-width:140px}
      .panel{padding:20px 12px}
      /* Smaller valentine buttons for phones */
      .val-btn{
        padding:10px 12px;
        min-width:110px;
        font-size:.98rem;
      }
    }
  </style>
</head>

<body>
  <!-- AUDIO: put your file next to index.html named audio.mp3 -->
  <audio id="bgMusic" loop preload="auto" playsinline>
    <source src="audio.mp3" type="audio/mpeg">
  </audio>

  <!-- Sound banner (only shows if autoplay blocked) -->
  <div id="soundBanner" class="sound-banner" role="status" aria-live="polite">
    <div>
      <strong>Tap to enable sound</strong>
      <div class="muted small">tap me</div>
    </div>
    <button id="soundBtn" class="btn primary" type="button">Enable</button>
  </div>

  <!-- LANDING -->
  <section id="landing" class="screen active" aria-label="Landing">
    <button id="startBtn" class="heart-btn" type="button" aria-label="Start">
      <span class="heart-icon">‚ù§</span>
      <span>Click me</span>
    </button>
  </section>

  <!-- MAIN -->
  <section id="main" class="screen" aria-label="Main">
    <header class="nav">
      <div class="nav-inner">
        <div class="brand">
          <span class="brand-dot">üíó</span>
          <span>Shaz</span>
        </div>

        <div class="nav-right">
          <button id="navHeart" class="heart-btn" type="button" aria-label="Continue">
            <span class="heart-icon">‚ù§</span>
            <span>Click me</span>
          </button>
          <button id="musicBtn" class="btn" type="button" aria-label="Toggle music">üéµ Pause</button>
        </div>
      </div>
    </header>

    <main class="container">
      <div class="panel">
        <h1 class="title-anim">A little surprise üíï</h1>
        <div class="card">
          <p class="muted">Tap the heart.</p>
          <p class="muted small"></p>
        </div>
      </div>
    </main>
  </section>

  <!-- VALENTINE -->
  <section id="valentine" class="screen" aria-label="Valentine Question">
    <div class="container">
      <div class="panel">
        <h1 class="title-anim">Will you be my Valentine</h1>

        <div class="row" style="gap:12px; margin-top:10px;">
          <button id="yesBtn" class="btn primary val-btn" type="button">Yes</button>
          <button id="noBtn" class="btn danger val-btn" type="button">No</button>
        </div>

        <p id="hint" class="muted small" style="text-align:center; margin-top:14px;"></p>
      </div>
    </div>
  </section>

  <!-- THANK YOU -->
  <section id="thanks" class="screen" aria-label="Thank You">
    <div class="container">
      <div class="panel" style="text-align:center;">
        <div class="thank-you">Thank you mami</div>
        <p class="muted">You just made my whole day.</p>
        <div class="row" style="justify-content:center; margin-top:12px;">
          <button id="restartBtn" class="btn" type="button">Restart</button>
        </div>
      </div>
    </div>
  </section>

  <script>
    // ===== Router =====
    const screens = {
      landing: document.getElementById("landing"),
      main: document.getElementById("main"),
      valentine: document.getElementById("valentine"),
      thanks: document.getElementById("thanks"),
    };
    function showScreen(name){
      Object.values(screens).forEach(s => s.classList.remove("active"));
      screens[name].classList.add("active");
      window.scrollTo({top:0, behavior:"instant"});
    }

    // ===== Audio (best possible on mobile) =====
    const bgMusic = document.getElementById("bgMusic");
    const musicBtn = document.getElementById("musicBtn");
    const soundBanner = document.getElementById("soundBanner");
    const soundBtn = document.getElementById("soundBtn");

    let musicPlaying = false;
    let triedOnce = false;

    function setBanner(show){
      if(!soundBanner) return;
      soundBanner.classList.toggle("show", !!show);
    }

    function updateMusicBtn(){
      if(!musicBtn) return;
      musicBtn.textContent = musicPlaying ? "üéµ Pause" : "üéµ Play";
    }

    async function playMusic(){
      if(!bgMusic) return false;
      try{
        await bgMusic.play();
        musicPlaying = true;
        updateMusicBtn();
        setBanner(false);
        return true;
      }catch(e){
        musicPlaying = false;
        updateMusicBtn();
        return false;
      }
    }

    function attachOneTapStart(){
      const kick = async () => {
        await playMusic();
        window.removeEventListener("pointerdown", kick);
        window.removeEventListener("touchstart", kick);
        window.removeEventListener("keydown", kick);
      };
      window.addEventListener("pointerdown", kick, { once:true });
      window.addEventListener("touchstart", kick, { once:true, passive:true });
      window.addEventListener("keydown", kick, { once:true });
    }

    async function tryAutoplayOnLoad(){
      if(triedOnce) return;
      triedOnce = true;

      // Try autoplay immediately
      const ok = await playMusic();
      if(!ok){
        // Autoplay blocked: show banner + start on first interaction
        setBanner(true);
        attachOneTapStart();
      }
    }

    document.addEventListener("DOMContentLoaded", tryAutoplayOnLoad);

    // Banner enable button
    if(soundBtn){
      soundBtn.addEventListener("click", async ()=>{
        await playMusic();
      });
    }

    // Manual toggle
    if(musicBtn){
      musicBtn.addEventListener("click", async ()=>{
        if(!bgMusic) return;
        try{
          if(!musicPlaying){
            await playMusic();
          }else{
            bgMusic.pause();
            musicPlaying = false;
            updateMusicBtn();
          }
        }catch(e){}
      });
    }

    // ===== Navigation =====
    document.getElementById("startBtn").addEventListener("click", async ()=>{
      showScreen("main");
      await playMusic(); // user gesture helps on phones
    });

    document.getElementById("navHeart").addEventListener("click", async ()=>{
      showScreen("valentine");
      resetNoBtn();
      await playMusic(); // user gesture helps on phones
    });

    // ===== No button dodges =====
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const hint = document.getElementById("hint");
    const restartBtn = document.getElementById("restartBtn");

    function rand(min, max){ return Math.random() * (max - min) + min; }

    function resetNoBtn(){
      noBtn.style.position = "relative";
      noBtn.style.left = "0px";
      noBtn.style.top = "0px";
      if(hint) hint.textContent = "";
    }

    function moveNoAway(){
      // Smaller range keeps it visible on phones
      const x = rand(-120, 120);
      const y = rand(-70, 70);
      noBtn.style.left = `${x}px`;
      noBtn.style.top  = `${y}px`;
      if(hint) hint.textContent = "Hehe‚Ä¶ try again üòÑ";
    }

    // desktop
    noBtn.addEventListener("mouseenter", moveNoAway);
    noBtn.addEventListener("click", moveNoAway);

    // mobile
    noBtn.addEventListener("touchstart", (e)=>{
      e.preventDefault();
      moveNoAway();
    }, { passive:false });

    yesBtn.addEventListener("click", async ()=>{
      showScreen("thanks");
      await playMusic();
    });

    restartBtn.addEventListener("click", ()=>{
      resetNoBtn();
      showScreen("landing");
    });
  </script>
</body>
</html>
